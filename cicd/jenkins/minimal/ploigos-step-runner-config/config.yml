---
step-runner-config:
  config-decryptors:
  - implementer: SOPS

  global-defaults:
    organization: ploigos-ref
    application-name: ref-javascript-npm-jenkins-min
    service-name: ""
    author: ploigos
    license: MIT

  generate-metadata:
  - implementer: Maven
  - implementer: Git
  - implementer: SemanticVersion

  unit-test:
  - implementer: Npm

  package:
  - implementer: Maven

  create-container-image:
  - implementer: Buildah
    config:
      destination: localhost/tssc-reference-app-quarkus-rest-json

  push-container-image:
  - implementer: Skopeo
    config:
      destination-url: quay-quay-enterprise.apps.tssc.rht-set.com

  deploy:
  - implementer: ArgoCD
    config:
      argocd-api: argocd-server-argocd.apps.tssc.rht-set.com
      argocd-username: admin
      argocd-skip-tls: True
      deployment-config-helm-chart-path: charts/reference-quarkus-mvn-deploy
      deployment-config-repo: http://gitea.tssc.rht-set.com/ploigos-reference-applications/reference-quarkus-mvn-cloud-resources_jenkins_workflow-minimal.git
      deployment-config-helm-chart-values-file-image-tag-yq-path: 'image.tag'
      git-username: sa-ploigos-ref-apps
      git-email: 'napsspo+tssc@redhat.com'
      argocd-sync-timeout-seconds: 130
      environment-config:
        DEV:
          deployment-config-helm-chart-environment-values-file: values-DEV.yaml
        TEST:
          deployment-config-helm-chart-environment-values-file: values-TEST.yaml
        PROD:
          deployment-config-helm-chart-environment-values-file: values-PROD.yaml

  report:
  - implementer: ResultArtifactsArchive
    config:
      results-archive-destination-url: http://artifactory.apps.tssc.rht-set.com/artifactory/release-engineering-workflow-result-artifacts-archives
      results-archive-destination-username: tssc
